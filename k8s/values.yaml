# Default values for Hook0 (sandbox environment)

nameOverride: ''
fullnameOverride: ''

# --- API ---
api:
  replicaCount: 1
  image:
    repository: 711387106999.dkr.ecr.eu-north-1.amazonaws.com/hook0/api
    pullPolicy: Always
    tag: 'latest'
  env:
    IP: '0.0.0.0'
    PORT: '8081'
    CORS_ALLOWED_ORIGINS: 'https://hook0.sandbox.fimento.io'
    APP_URL: 'https://hook0.sandbox.fimento.io'
    EMAIL_SENDER_ADDRESS: 'noreply@fimento.com'
  # ------------------------------------------------------------------
  # K8s Secret: "hook0"
  # Create with:
  #   kubectl create secret generic hook0 --namespace hook0 \
  #     --from-literal=DATABASE_URL='postgres://hook0_user:PASSWORD@YOUR_RDS_HOST:5432/hook0' \
  #     --from-literal=BISCUIT_PRIVATE_KEY='GENERATE_A_NEW_KEY_FOR_PRODUCTION' \
  #     --from-literal=SMTP_CONNECTION_URL='smtp://LOGIN:KEY_VALUE@smtp-relay.brevo.com:587'
  #
  # SMTP_CONNECTION_URL format: smtp://<login>:<key_value>@<smtp_server>:<port>
  #   - login:      Brevo SMTP login (e.g. 952c62001@smtp-brevo.com)
  #   - key_value:  Brevo SMTP key value (the long generated string)
  #   - smtp_server: smtp-relay.brevo.com
  #   - port:        587
  # ------------------------------------------------------------------
  secretEnv:
    DATABASE_URL:
      secretName: hook0
      key: DATABASE_URL
    BISCUIT_PRIVATE_KEY:
      secretName: hook0
      key: BISCUIT_PRIVATE_KEY
    SMTP_CONNECTION_URL:
      secretName: hook0
      key: SMTP_CONNECTION_URL
  ingress:
    enabled: true
    className: 'kong'
    annotations: {}
    hosts:
      - host: hook0-api.sandbox.fimento.io
        paths:
          - path: /
            pathType: Prefix
    tls:
      - secretName: hook0-api-sandbox-fimento-io-tls
        hosts:
          - hook0-api.sandbox.fimento.io
  resources:
    limits:
      memory: 512Mi
    requests:
      cpu: 50m
      memory: 128Mi

# --- Frontend (dashboard) ---
frontend:
  enabled: true
  replicaCount: 1
  image:
    repository: 711387106999.dkr.ecr.eu-north-1.amazonaws.com/hook0/frontend
    pullPolicy: Always
    tag: 'latest'
  env:
    API_ENDPOINT: 'https://hook0-api.sandbox.fimento.io/api/v1'
  resources:
    limits:
      memory: 256Mi
    requests:
      cpu: 25m
      memory: 64Mi

# --- Output Worker (webhook delivery) ---
outputWorker:
  replicaCount: 1
  image:
    repository: 711387106999.dkr.ecr.eu-north-1.amazonaws.com/hook0/output-worker
    pullPolicy: Always
    tag: 'latest'
  env:
    WORKER_NAME: 'default'
    DISABLE_TARGET_IP_CHECK: 'false'
  secretEnv:
    DATABASE_URL:
      secretName: hook0
      key: DATABASE_URL
  resources:
    limits:
      memory: 512Mi
    requests:
      cpu: 50m
      memory: 128Mi
